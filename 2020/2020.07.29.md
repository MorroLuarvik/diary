[Раньше](2020.07.27.md)  
## Утро
Поднялся во время. Лёг вчера немного пораньше, спал на 30 минут больше.

Позавтракал хлебом с арахисовым маслом.

Побрился. Это заняло дополнителное время. Ещё на это повлияло то, что сегодня я брал с собой еду и лимонад на работу.

Вышел в 7:40. До автобуса бежал через дорогу. Если завтра буду добираться своим ходом, нужно вставать на 10 минут раньше.

По пути слушал подкасты.
## Работа
Пока предаюсь безделию. Сделал форматированный вывод. Посмотрел как можно настроить timezone в питоновском datetime.

Предполагаю расписать структуру данных для различных производителей.
Создать таблицы для загрузки данных и выгрузить эти данные.

А хочется взяться #sbwatcher.

До обеда просмотрел структуру данных товаров. Возникло несколько идей.

На ободенном перерыве выполнил физичечкие нормы и сделал английский.  
Уверенно делаю 6 подтягиваний, дальше - через боль. No pain - no gain.

После обеда не выдержал и взялся за реализация загрузки истории торгов.  
Историю взял с дебаггера хрома. При таком варианте даты сразы отдаются в формате TS и нет необходимости раздбираться с TZ.

При загрузке торгов usd обнаружил записи с одинаковыми TS. Сделал несколько исправлений вручную, возможно уничтожив невиновные записи, но затем автоматизировал это дело.

Залил данные на рабочей машине и на бою. К стати, cron'овское обновление на сервере успешно работает.

Также изменил работу источника данных. Теперь ему можно задавать произвольные условия выборки, а не только `=`.

Это понадобилось, чтобы тестовый скрипт не выводил простыню курсов валют, а сообщал данные только за последние 24 часа.

После борьбы с #sbwatcher взялся за рабочие задачи. Для полноценного анализа данных о товарах реализовал сравнение ключей. Душераздирающее зрелище открылось. Но я примерно представляю в каком направлении копать.

Провёл второй сеанс медитации и сделал запись в дневнике.

Завтра в столовой санитарный день. Нужно себе продуктов для сендвичей закупить.
## Путь домой
Добирался на общественном транспорте. По пути слушал подкаст, поэтому подумать над реализацией оповещения не получилось.

Перед домом взял в магазине продуктов для сендвича. И конфеты.
## Дома
Закинул свои вещи в стирку. Сполоснулся.

Сделал себе сендвичи и поужинал.  

Просматиривал код #sbwatcher'а. Увидел как "расползается структура". Например как в апдейтере вызывается источник данных, чтобы залить туда данные, и интерфес сбера, чтобы конвертировать полученные JSON данные в формат БД.

Хоть и из интерфейса и из менеджера используется по одному методу, но метод определения наличия записи, который вызывается из менеджера запросов, здесь логически не вписывается. Этот метод должен быть в источнике данных.

Потупил, сходил за водой. Сменил вату в испарителе.
Встретил Нелли. Почистил зубы.  
[Дальше](2020.07.30.md)